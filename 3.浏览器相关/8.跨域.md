## 跨域9法
跨域：违背同源策略的行为就叫跨域，同源策略：协议、域名、端口都要相同。    
跨域并不是请求发不出去，请求能发出去，服务端能收到请求并正常返回结果，只是结果被浏览器拦截了

9种方法：jsonp\cors\postMessage\websocket\Node中间件代理\
nginx反向代理\window.name+iframe\location.hash+iframe\document.domin+iframe

### 知识铺垫 iframe（内联框架元素）
可以把另一个html页面嵌入到当前页面上

### jsonp
核心步骤： 创建script标签；写回调函数； script.src；把script、appendChild到body上    
特点： 简单兼容性好，利用script标签没有跨域限制的漏洞。仅支持GET请求。


### cors（Cross-origin resource sharing）
需要浏览器和后端同时支持，关键是后端     
服务端设置Access-Control-Allow-Origin就可以开启CORS。该属性表示哪些域名可以访问本服务器的资源
#### 简单请求和复杂请求
1. 简单请求
请求方法： GET\POST\HEAD、 Content-Type:文本 form表单
2. 复杂请求
复杂请求的CORS请求会在正式通信之前，增加一次http查询请求，为option方法，为预检查，通过该请求来知道服务端是否允许跨域请求。



### postMessage
frame.contentWindow.postMessage(message, targetOrigin, [transfer]);

有点模糊， 下次在补充一点


### websocket
WebSocket 是一种双向通信协议，在建立连接之后，WebSocket 的 server 与 client 都能主动向对方发送或接收数据。    
在建立联接的时候需要http协议，连接建立好了就不需要了。


### 代理服务器
同源策略是浏览器需要遵守的标准，如果是服务器向服务器请求就不需要遵循同源策略。    
代理服务器接受客户端请求，将请求转发给服务器，拿到服务器响应数据，再转发给客户端。   


### ngnix反向代理
搭建一个中转ngnix服务器，用于转发请求    
实现思路： 通过ngnix配置一个代理服务器。


### 7.window.name + iframe
window.name属性的独特之处：name值在不同的页面（甚至不同域名）加载后依旧存在，并且可以支持非常长的 name 值（2MB）



### 9.document.domain + iframe
该方式只能用于二级域名相同的情况下，比如 a.test.com 和 b.test.com 适用于该方式。
只需要给页面添加 document.domain ='test.com' 表示二级域名都相同就可以实现跨域。
实现原理：两个页面都通过js强制设置document.domain为基础主域，就实现了同域。



[文章参考](https://juejin.im/post/5c23993de51d457b8c1f4ee1#heading-15)
有点难啃，涉及知识面比较多，慢慢来